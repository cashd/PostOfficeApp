{"ast":null,"code":"import _classCallCheck from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cash/Documents/PostOffice/Frontend-React/src/containers/customerHome/index.js\";\nimport React from 'react';\nimport Table from 'react-bootstrap/Table';\nimport Cookie from 'js-cookie';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport { List } from 'immutable';\nimport { apiPost } from '../../utils/api';\nimport Alert from \"react-bootstrap/Alert\";\nimport { PieChart, Pie, LabelList, Cell, ResponsiveContainer } from 'recharts';\n\nvar CustomerHome =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CustomerHome, _React$Component);\n\n  function CustomerHome(props) {\n    var _this;\n\n    _classCallCheck(this, CustomerHome);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CustomerHome).call(this, props));\n\n    _this.openNewPackage = function () {\n      _this.setState({\n        newPackageViewStatus: !_this.state.newPackageViewStatus\n      });\n    };\n\n    _this.openStatusReport = function () {\n      _this.setState({\n        showPackStatusReport: !_this.state.showPackStatusReport\n      });\n    };\n\n    _this.newPackageSubmit = function () {\n      if (_this.state.newPackEmail && _this.state.newPackAddress && _this.state.newPackWeight) {\n        apiPost('/customer/newPackage', {\n          recipientEmail: _this.props.newPackEmail,\n          recipientAddress: _this.props.newPackAddress,\n          weight: _this.props.newPackWeight,\n          senderID: _this.state.id\n        }).then(function (resp) {\n          if (resp.success && resp.success === true) {\n            window.location.reload();\n          }\n        }).catch(function (error) {\n          _this.setState({\n            notification: {\n              is: true,\n              message: 'Could not make new package.',\n              type: 'danger',\n              header: 'Error!'\n            }\n          });\n        });\n      }\n    };\n\n    _this.makeTR = function (p, id) {\n      return React.createElement(React.Fragment, {\n        key: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \" \", React.createElement(\"a\", {\n        href: '/tracking#' + p.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, p.id)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \" \", p.senderEmail, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \" \", p.recipientEmail, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \" \", p.senderAddress, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \" \", p.recipientAddress, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \" \", p.deliveryStatus, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \" \", p.packageWeight, \" \")));\n    };\n\n    _this.handleNewPackageEmail = function (event) {\n      _this.setState({\n        newPackEmail: event.target.value\n      });\n    };\n\n    _this.handleNewPackageAddress = function (event) {\n      _this.setState({\n        newPackAddress: event.target.value\n      });\n    };\n\n    _this.handleNewPackageWeight = function (event) {\n      _this.setState({\n        newPackWeight: event.target.value\n      });\n    };\n\n    _this.getPackages = function () {\n      apiPost('/customer/packages', {\n        id: _this.state.id\n      }).then(function (resp) {\n        _this.setState({\n          packages: List(resp.packages)\n        }, function () {\n          _this.computeData();\n        });\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not get packages.',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.getIncomingPackages = function () {\n      apiPost('/customer/incomingpackages', {\n        id: _this.state.id\n      }).then(function (resp) {\n        _this.setState({\n          inPackages: List(resp.packages)\n        });\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not get packages.',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.renderCustomizedLabel = function (_ref) {\n      var cx = _ref.cx,\n          cy = _ref.cy,\n          midAngle = _ref.midAngle,\n          innerRadius = _ref.innerRadius,\n          outerRadius = _ref.outerRadius,\n          percent = _ref.percent,\n          index = _ref.index;\n      var radius = 25 + innerRadius + (outerRadius - innerRadius);\n      var x = cx + radius * Math.cos(-midAngle * RADIAN);\n      var y = cy + radius * Math.sin(-midAngle * RADIAN);\n      return React.createElement(\"text\", {\n        x: x,\n        y: y,\n        fill: \"black\",\n        textAnchor: x > cx ? 'start' : 'end',\n        dominantBaseline: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"\".concat(_this.state.statusData[index].name, \" \").concat((percent * 100).toFixed(0), \"%\"));\n    };\n\n    _this.computeData = function () {\n      console.log(_this.state.packages);\n      var data = [{\n        name: 'Label Created',\n        value: 0\n      }, {\n        name: 'Drop Off',\n        value: 0\n      }, {\n        name: 'In Sorting',\n        value: 0\n      }, {\n        name: 'In Transit',\n        value: 0\n      }, {\n        name: 'Out for Delivery',\n        value: 0\n      }, {\n        name: 'Delivered',\n        value: 0\n      }];\n\n      _this.state.packages.forEach(function (p) {\n        for (var i = 0; i < 6; i++) {\n          if (p.deliveryStatus === data[i].name) {\n            console.log(p.deliveryStatus, data[i].name);\n            data[i].value += 1;\n          }\n        }\n      });\n\n      data = data.filter(function (i) {\n        return i.value !== 0;\n      });\n\n      _this.setState({\n        statusData: data\n      }, function () {\n        console.log(_this.state.statusData);\n      });\n    };\n\n    _this.state = {\n      id: Cookie.get('id'),\n      packages: List([]),\n      inPackages: List([]),\n      newPackageViewStatus: false,\n      showPackStatusReport: false,\n      error: {\n        is: false,\n        msg: ''\n      },\n      newPackEmail: '',\n      newPackAddress: '',\n      newPackWeight: 0,\n      statusData: [],\n      notification: {\n        is: false,\n        message: '',\n        type: '',\n        header: ''\n      }\n    };\n    _this.openNewPackage = _this.openNewPackage.bind(_assertThisInitialized(_this));\n    _this.makeTR = _this.makeTR.bind(_assertThisInitialized(_this));\n    _this.newPackageSubmit = _this.newPackageSubmit.bind(_assertThisInitialized(_this));\n    _this.handleNewPackageEmail = _this.handleNewPackageEmail.bind(_assertThisInitialized(_this));\n    _this.handleNewPackageAddress = _this.handleNewPackageAddress.bind(_assertThisInitialized(_this));\n    _this.handleNewPackageWeight = _this.handleNewPackageWeight.bind(_assertThisInitialized(_this));\n    _this.getPackages = _this.getPackages.bind(_assertThisInitialized(_this));\n    _this.getIncomingPackages = _this.getIncomingPackages.bind(_assertThisInitialized(_this));\n    _this.computeData = _this.computeData.bind(_assertThisInitialized(_this));\n    _this.renderCustomizedLabel = _this.renderCustomizedLabel.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CustomerHome, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPackages();\n      this.getIncomingPackages();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"/modalCss.css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), this.state.notification.is ? React.createElement(Alert, {\n        variant: this.state.notification.type,\n        dismissible: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \" \", React.createElement(Alert.Heading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.notification.header), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.notification.message)) : null, React.createElement(Modal, {\n        show: this.state.newPackageViewStatus,\n        onHide: this.openNewPackage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Ship a New Package\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \" Recipient Email \"), React.createElement(Form.Control, {\n        placeholder: \"example@email.com\",\n        value: this.state.newPackEmail,\n        onChange: this.handleNewPackageEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridAddress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \" Recipient Address \"), React.createElement(Form.Control, {\n        placeholder: \"123 Main St.\",\n        value: this.state.newPackAddress,\n        onChange: this.handleNewPackageAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }))), React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Col,\n        controlId: \"formGridWeight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \" Package Weight \"), React.createElement(Form.Control, {\n        placeholder: \"1.0\",\n        value: this.state.newPackWeight,\n        onChange: this.handleNewPackageWeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }))))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.openNewPackage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.newPackageSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Submit\"))), React.createElement(Modal, {\n        show: this.state.showPackStatusReport,\n        size: \"lg\",\n        onHide: this.openStatusReport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Customer Package Status Report\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(ResponsiveContainer, {\n        width: '100%',\n        height: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(PieChart, {\n        width: 500,\n        height: 500,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Pie, {\n        data: this.state.statusData,\n        cx: 375,\n        cy: 200,\n        label: this.renderCustomizedLabel,\n        outerRadius: 120,\n        fill: \"#8884d8\",\n        dataKey: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, this.state.statusData.map(function (entry, index) {\n        return React.createElement(Cell, {\n          key: \"cell-\".concat(index),\n          fill: COLORS[index % COLORS.length],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        });\n      }))))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })), React.createElement(Card, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Control Center\"), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Customer Actions\"), React.createElement(Button, {\n        size: \"lg\",\n        variant: \"success\",\n        onClick: this.openNewPackage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Ship a new package\"), React.createElement(Button, {\n        style: {\n          marginLeft: '10px'\n        },\n        size: \"lg\",\n        variant: \"info\",\n        onClick: this.openStatusReport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Review Package Status Report\"))), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        as: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Package Statistics\"), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Average Weight: \", this.state.packages.map(function (p) {\n        return p.packageWeight;\n      }).reduce(function (prev, curr) {\n        return prev + curr;\n      })))), React.createElement(\"div\", {\n        style: {\n          marginTop: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Your Packages:\")), React.createElement(Table, {\n        style: tableStyle,\n        striped: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Sender Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Recipient Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"Sender Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"Recipient Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Weight\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, this.state.packages.map(function (pack) {\n        return _this2.makeTR(pack, pack.id);\n      }))), React.createElement(\"div\", {\n        style: {\n          marginTop: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Packages en-route to you:\")), React.createElement(Table, {\n        style: tableStyle,\n        striped: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Sender Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Recipient Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"Sender Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Recipient Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Weight\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, this.state.inPackages.map(function (pack) {\n        return _this2.makeTR(pack, pack.id);\n      }))));\n    }\n  }]);\n\n  return CustomerHome;\n}(React.Component);\n\nvar COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#00C49F', '#FFBB28', '#FF8042'];\nvar RADIAN = Math.PI / 180;\nvar tableStyle = {\n  margin: '0 auto',\n  marginTop: '3%',\n  textAlign: \"center\"\n};\nexport default CustomerHome;","map":{"version":3,"sources":["/home/cash/Documents/PostOffice/Frontend-React/src/containers/customerHome/index.js"],"names":["React","Table","Cookie","Button","Modal","Form","Col","Card","List","apiPost","Alert","PieChart","Pie","LabelList","Cell","ResponsiveContainer","CustomerHome","props","openNewPackage","setState","newPackageViewStatus","state","openStatusReport","showPackStatusReport","newPackageSubmit","newPackEmail","newPackAddress","newPackWeight","recipientEmail","recipientAddress","weight","senderID","id","then","resp","success","window","location","reload","catch","error","notification","is","message","type","header","makeTR","p","senderEmail","senderAddress","deliveryStatus","packageWeight","handleNewPackageEmail","event","target","value","handleNewPackageAddress","handleNewPackageWeight","getPackages","packages","computeData","getIncomingPackages","inPackages","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","index","radius","x","Math","cos","RADIAN","y","sin","statusData","name","toFixed","console","log","data","forEach","i","filter","get","msg","bind","map","entry","COLORS","length","marginLeft","reduce","prev","curr","marginTop","tableStyle","pack","Component","PI","margin","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Table from 'react-bootstrap/Table'\r\nimport Cookie from 'js-cookie'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Card from 'react-bootstrap/Card'\r\nimport { List } from 'immutable'\r\nimport {apiPost} from '../../utils/api';\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport {\r\n  PieChart, Pie, LabelList, Cell, ResponsiveContainer,\r\n} from 'recharts';\r\n\r\nclass CustomerHome extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: Cookie.get('id'),\r\n      packages: List([]),\r\n      inPackages: List([]),\r\n      newPackageViewStatus: false,\r\n      showPackStatusReport: false,\r\n      error: { is: false, msg: '' },\r\n      newPackEmail: '',\r\n      newPackAddress: '',\r\n      newPackWeight: 0,\r\n      statusData: [],\r\n      notification: { is: false, message: '', type: '', header: '' }\r\n};\r\n    this.openNewPackage = this.openNewPackage.bind(this);\r\n    this.makeTR = this.makeTR.bind(this);\r\n    this.newPackageSubmit = this.newPackageSubmit.bind(this);\r\n    this.handleNewPackageEmail = this.handleNewPackageEmail.bind(this);\r\n    this.handleNewPackageAddress = this.handleNewPackageAddress.bind(this);\r\n    this.handleNewPackageWeight = this.handleNewPackageWeight.bind(this);\r\n    this.getPackages = this.getPackages.bind(this);\r\n    this.getIncomingPackages = this.getIncomingPackages.bind(this);\r\n    this.computeData = this.computeData.bind(this);\r\n    this.renderCustomizedLabel = this.renderCustomizedLabel.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPackages();\r\n    this.getIncomingPackages();\r\n  }\r\n\r\n  openNewPackage = () => {\r\n    this.setState({ newPackageViewStatus: !this.state.newPackageViewStatus })\r\n  };\r\n\r\n  openStatusReport = () => {\r\n    this.setState({ showPackStatusReport: !this.state.showPackStatusReport })\r\n  };\r\n\r\n  newPackageSubmit = () => {\r\n    if (this.state.newPackEmail && this.state.newPackAddress && this.state.newPackWeight) {\r\n      apiPost('/customer/newPackage', {\r\n        recipientEmail: this.props.newPackEmail,\r\n        recipientAddress: this.props.newPackAddress,\r\n        weight: this.props.newPackWeight,\r\n        senderID: this.state.id\r\n      })\r\n        .then(resp => {\r\n          if (resp.success && resp.success === true) {\r\n            window.location.reload();\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.setState({ notification: { is: true, message: 'Could not make new package.', type: 'danger', header: 'Error!' } })\r\n        })\r\n    }\r\n  };\r\n\r\n  makeTR = (p, id) => {\r\n    return (\r\n      <React.Fragment key={id}>\r\n        <tr>\r\n          <td> <a href={'/tracking#' + p.id} >{p.id}</a></td>\r\n          <td> { p.senderEmail } </td>\r\n          <td> { p.recipientEmail } </td>\r\n          <td> { p.senderAddress } </td>\r\n          <td> { p.recipientAddress } </td>\r\n          <td> { p.deliveryStatus } </td>\r\n          <td> { p.packageWeight } </td>\r\n        </tr>\r\n      </React.Fragment>)\r\n  };\r\n\r\n  handleNewPackageEmail = (event) => {\r\n    this.setState({ newPackEmail: event.target.value })\r\n  };\r\n\r\n  handleNewPackageAddress = (event) => {\r\n    this.setState({ newPackAddress: event.target.value })\r\n  };\r\n\r\n  handleNewPackageWeight = (event) => {\r\n    this.setState({ newPackWeight: event.target.value })\r\n  };\r\n\r\n  getPackages = () => {\r\n    apiPost('/customer/packages', { id: this.state.id })\r\n      .then(resp => {\r\n        this.setState({ packages: List(resp.packages) }, () => { this.computeData() })\r\n      })\r\n      .catch(error => {\r\n        this.setState({ notification: { is: true, message: 'Could not get packages.', type: 'danger', header: 'Error!' } })\r\n      })\r\n  };\r\n\r\n  getIncomingPackages = () => {\r\n    apiPost('/customer/incomingpackages', { id: this.state.id })\r\n      .then(resp => {\r\n        this.setState({ inPackages: List(resp.packages) })\r\n      })\r\n      .catch(error => {\r\n        this.setState({ notification: { is: true, message: 'Could not get packages.', type: 'danger', header: 'Error!' } })\r\n      })\r\n  };\r\n\r\n  renderCustomizedLabel = ({\r\n  cx, cy, midAngle, innerRadius, outerRadius, percent, index,\r\n}) => {\r\n   const radius = 25 + innerRadius + (outerRadius - innerRadius);\r\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n  return (\r\n    <text x={x} y={y} fill=\"black\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"middle\">\r\n      {`${this.state.statusData[index].name} ${(percent * 100).toFixed(0)}%`}\r\n    </text>\r\n  );\r\n};\r\n\r\n  computeData = () => {\r\n    console.log(this.state.packages)\r\n    let data = [\r\n      { name: 'Label Created', value: 0 },\r\n      { name: 'Drop Off', value: 0 },\r\n      { name: 'In Sorting', value: 0 },\r\n      { name: 'In Transit', value: 0 },\r\n      { name: 'Out for Delivery', value: 0 },\r\n      { name: 'Delivered', value: 0 }\r\n    ];\r\n    this.state.packages.forEach((p) => {\r\n      for (let i=0; i < 6; i++) {\r\n        if (p.deliveryStatus === data[i].name) {\r\n          console.log(p.deliveryStatus, data[i].name);\r\n          data[i].value += 1\r\n        }\r\n      }\r\n    });\r\n    data = data.filter((i) => {\r\n      return i.value !== 0\r\n    });\r\n    this.setState({ statusData: data }, () => { console.log(this.state.statusData) })\r\n  }\r\n  ;\r\n\r\n  render() {\r\n    return <div>\r\n      <link rel='stylesheet' href='/modalCss.css' />\r\n      { this.state.notification.is ? (<Alert variant={this.state.notification.type} dismissible> <Alert.Heading>{ this.state.notification.header }</Alert.Heading><p>{ this.state.notification.message }</p></Alert>): null }\r\n      <Modal show={this.state.newPackageViewStatus} onHide={this.openNewPackage}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Ship a New Package</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId='formGridEmail'>\r\n                <Form.Label> Recipient Email </Form.Label>\r\n                <Form.Control placeholder='example@email.com' value={this.state.newPackEmail} onChange={this.handleNewPackageEmail} />\r\n              </Form.Group>\r\n              <Form.Group as={Col} controlId='formGridAddress'>\r\n                <Form.Label> Recipient Address </Form.Label>\r\n                <Form.Control placeholder='123 Main St.' value={this.state.newPackAddress} onChange={this.handleNewPackageAddress} />\r\n              </Form.Group>\r\n            </Form.Row>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId='formGridWeight'>\r\n                <Form.Label> Package Weight </Form.Label>\r\n                <Form.Control placeholder='1.0' value={this.state.newPackWeight} onChange={this.handleNewPackageWeight} />\r\n              </Form.Group>\r\n            </Form.Row>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={this.openNewPackage}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={this.newPackageSubmit}>\r\n            Submit\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      <Modal show={this.state.showPackStatusReport} size='lg' onHide={this.openStatusReport}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Customer Package Status Report</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <ResponsiveContainer width={'100%'} height={400}>\r\n            <PieChart width={500} height={500}>\r\n              <Pie\r\n                data={this.state.statusData}\r\n                cx={375}\r\n                cy={200}\r\n                label={this.renderCustomizedLabel}\r\n                outerRadius={120}\r\n                fill=\"#8884d8\"\r\n                dataKey=\"value\"\r\n              >\r\n                {\r\n                  this.state.statusData.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)\r\n                }\r\n              </Pie>\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n\r\n      <Card className=\"text-center\">\r\n        <Card.Header>Control Center</Card.Header>\r\n        <Card.Body>\r\n          <Card.Title>Customer Actions</Card.Title>\r\n          <Button size='lg' variant='success' onClick={this.openNewPackage}>Ship a new package</Button>\r\n          <Button style={ { marginLeft: '10px' } } size='lg' variant='info' onClick={this.openStatusReport}>Review Package Status Report</Button>\r\n        </Card.Body>\r\n      </Card>\r\n      <Card>\r\n        <Card.Header as='h5'>Package Statistics</Card.Header>\r\n        <Card.Body><h5>Average Weight: { this.state.packages.map(p => p.packageWeight).reduce((prev, curr) => prev+curr) }</h5></Card.Body>\r\n      </Card>\r\n\r\n      <div style={{ marginTop: '2%' }}>\r\n        <h1>Your Packages:</h1>\r\n      </div>\r\n    <Table style={tableStyle} striped bordered hover>\r\n    <thead>\r\n      <tr>\r\n        <th>#</th>\r\n        <th>Sender Email</th>\r\n        <th>Recipient Email</th>\r\n        <th>Sender Address</th>\r\n        <th>Recipient Address</th>\r\n        <th>Status</th>\r\n        <th>Weight</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n    { this.state.packages.map((pack) => { return this.makeTR(pack, pack.id) }) }\r\n    </tbody>\r\n    </Table>\r\n\r\n    <div style={{ marginTop: '2%' }}>\r\n      <h1>Packages en-route to you:</h1>\r\n    </div>\r\n      <Table style={tableStyle} striped bordered hover>\r\n    <thead>\r\n      <tr>\r\n        <th>#</th>\r\n        <th>Sender Email</th>\r\n        <th>Recipient Email</th>\r\n        <th>Sender Address</th>\r\n        <th>Recipient Address</th>\r\n        <th>Status</th>\r\n        <th>Weight</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n    { this.state.inPackages.map((pack) => { return this.makeTR(pack, pack.id) }) }\r\n    </tbody>\r\n    </Table>\r\n</div>\r\n    }\r\n}\r\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#00C49F', '#FFBB28', '#FF8042'];\r\n\r\nconst RADIAN = Math.PI / 180;\r\n\r\nconst tableStyle = {\r\n  margin: '0 auto',\r\n  marginTop: '3%',\r\n  textAlign: \"center\",\r\n};\r\n\r\n\r\nexport default CustomerHome;"]},"metadata":{},"sourceType":"module"}