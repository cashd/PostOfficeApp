{"ast":null,"code":"import _classCallCheck from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/cash/Documents/PostOffice/Frontend-React/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cash/Documents/PostOffice/Frontend-React/src/containers/empDriver/index.js\";\nimport React from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport { List } from 'immutable';\nimport { apiPost } from '../../utils/api';\nimport Alert from 'react-bootstrap/Alert';\n\nvar EmpDriver =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EmpDriver, _React$Component);\n\n  function EmpDriver(props) {\n    var _this;\n\n    _classCallCheck(this, EmpDriver);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EmpDriver).call(this, props));\n\n    _this.makeTR = function (p, id) {\n      return React.createElement(React.Fragment, {\n        key: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, _this.state.type === 'Delivery' ? React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \" \", React.createElement(Button, {\n        name: \"deliver\",\n        onClick: _this.handleDeliverButton,\n        id: p.id,\n        variant: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Deliver\")) : null, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \" \", p.id, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \" \", p.senderEmail, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \" \", p.recipientEmail, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \" \", p.senderAddress, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \" \", p.recipientAddress, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \" \", p.deliveryStatus, \" \"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \" \", p.packageWeight, \" \")));\n    };\n\n    _this.getFacilities = function () {\n      apiPost('/facility/all', {\n        facilityID: _this.state.facilityID\n      }).then(function (resp) {\n        if (resp.facilities && resp.facilities.size !== 0) {\n          _this.setState({\n            facilities: List(resp.facilities)\n          });\n        } else {\n          _this.setState({\n            notification: {\n              is: true,\n              message: 'Could not get facilities.',\n              type: 'danger',\n              header: 'Error!'\n            }\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not get facilities.',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.getPackages = function () {\n      apiPost('/truck/packages', {\n        truckID: _this.state.truckID\n      }).then(function (resp) {\n        console.log(resp);\n\n        if (resp.packages && resp.packages.length !== 0) {\n          _this.setState({\n            packages: List(resp.packages)\n          });\n        } else {\n          _this.setState({\n            notification: {\n              is: true,\n              message: 'There are currently no packages at the facility!',\n              type: 'warning',\n              header: 'No packages.'\n            }\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not get facilities.',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.getTruckType = function () {\n      apiPost('/truck/type', {\n        truckID: _this.state.truckID\n      }).then(function (resp) {\n        console.log(resp);\n\n        _this.setState({\n          type: resp.type\n        });\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not get truck type!',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.handleCheckbox = function (event) {\n      var checkbox = document.getElementById(event.target.id);\n\n      if (checkbox.checked) {\n        _this.setState({\n          selectedPackages: _this.state.selectedPackages.push(event.target.id)\n        }, function () {\n          checkbox.checked = true;\n        });\n      } else {\n        _this.setState({\n          selectedPackages: _this.state.selectedPackages.delete(_this.state.selectedPackages.indexOf(event.target.id))\n        }, function () {\n          checkbox.checked = false;\n        });\n      }\n    };\n\n    _this.handleTravelButton = function (event) {\n      console.log(_this.state);\n      var state = _this.state;\n\n      if (state.selectedFacility !== 'Choose a Facility') {\n        apiPost('/truck/travel', {\n          packages: state.packages,\n          truckID: state.truckID,\n          facilityID: Number(state.selectedFacility[0])\n        }).then(function (resp) {\n          console.log(resp);\n\n          if (resp.success && resp.success === true) {\n            window.location.reload();\n          } else {\n            _this.setState({\n              notification: {\n                is: true,\n                message: 'Could not travel.',\n                type: 'danger',\n                header: 'Error!'\n              }\n            });\n          }\n        }).catch(function (error) {\n          _this.setState({\n            notification: {\n              is: true,\n              message: 'Could not travel.',\n              type: 'danger',\n              header: 'Error!'\n            }\n          });\n        });\n      }\n    };\n\n    _this.handleDeliverButton = function (event) {\n      apiPost('/truck/deliver', {\n        packageID: event.target.id,\n        driverID: _this.state.truckID\n      }).then(function (resp) {\n        console.log(resp);\n\n        if (resp.success && resp.success === true) {\n          window.location.reload();\n        } else {\n          _this.setState({\n            notification: {\n              is: true,\n              message: 'Could not deliver.',\n              type: 'danger',\n              header: 'Error!'\n            }\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          notification: {\n            is: true,\n            message: 'Could not deliver.',\n            type: 'danger',\n            header: 'Error!'\n          }\n        });\n      });\n    };\n\n    _this.handleFacilityChange = function (event) {\n      _this.setState({\n        selectedFacility: event.target.value\n      });\n    };\n\n    _this.state = {\n      id: props.info.id,\n      truckID: props.info.truckID,\n      type: '',\n      isManager: props.info.isManager ? props.info.isManager : false,\n      selectedFacility: 'Choose a Facility',\n      facilities: List([]),\n      packages: List([]),\n      selectedPackages: List([]),\n      notification: {\n        is: false,\n        message: '',\n        type: '',\n        header: ''\n      }\n    };\n    _this.makeTR = _this.makeTR.bind(_assertThisInitialized(_this));\n    _this.getPackages = _this.getPackages.bind(_assertThisInitialized(_this));\n    _this.getFacilities = _this.getFacilities.bind(_assertThisInitialized(_this));\n    _this.getTruckType = _this.getTruckType.bind(_assertThisInitialized(_this));\n    _this.handleCheckbox = _this.handleCheckbox.bind(_assertThisInitialized(_this));\n    _this.handleTravelButton = _this.handleTravelButton.bind(_assertThisInitialized(_this));\n    _this.handleFacilityChange = _this.handleFacilityChange.bind(_assertThisInitialized(_this));\n    _this.handleDeliverButton = _this.handleDeliverButton.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(EmpDriver, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPackages();\n      this.getFacilities();\n      this.getTruckType();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.state.notification.is ? React.createElement(Alert, {\n        variant: this.state.notification.type,\n        dismissible: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \" \", React.createElement(Alert.Heading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.notification.header), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.notification.message)) : null, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Control Center\"), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Driver Actions\"), React.createElement(Form.Row, {\n        style: {\n          width: 500,\n          margin: '0 auto',\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.type === 'Delivery' ? React.createElement(Button, {\n        variant: \"info\",\n        disabled: true,\n        style: ControlButtonStyle,\n        onClick: this.handleTravelButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Travel to Facility\") : React.createElement(Button, {\n        variant: \"info\",\n        style: ControlButtonStyle,\n        onClick: this.handleTravelButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Travel to Facility\"), React.createElement(Form.Group, {\n        as: Col,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        as: \"select\",\n        value: this.state.selectedFacility,\n        onChange: this.handleFacilityChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Choose a Facility\"), this.state.facilities.map(function (f) {\n        return React.createElement(\"option\", {\n          key: f.facilityID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, f.facilityID + ' - ' + f.address + ', ' + f.state + ', ' + f.zip);\n      }))))))), React.createElement(\"h3\", {\n        style: h3Style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Packages in Truck\"), React.createElement(Table, {\n        style: tableStyle,\n        striped: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.type === 'Delivery' ? React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Deliver\") : null, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Sender Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Sender Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Recipient Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Recipient Address\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Delivery Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Weight\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.state.packages.map(function (p) {\n        return _this2.makeTR(p, p.id);\n      }))));\n    }\n  }]);\n\n  return EmpDriver;\n}(React.Component);\n\nvar ControlButtonStyle = {\n  marginRight: '16px'\n};\nvar tableStyle = {\n  margin: '0 auto',\n  textAlign: \"center\"\n};\nvar h3Style = {\n  marginTop: '2.5%'\n};\nexport default EmpDriver;","map":{"version":3,"sources":["/home/cash/Documents/PostOffice/Frontend-React/src/containers/empDriver/index.js"],"names":["React","Button","Form","Col","Card","Table","List","apiPost","Alert","EmpDriver","props","makeTR","p","id","state","type","handleDeliverButton","senderEmail","recipientEmail","senderAddress","recipientAddress","deliveryStatus","packageWeight","getFacilities","facilityID","then","resp","facilities","size","setState","notification","is","message","header","catch","error","getPackages","truckID","console","log","packages","length","getTruckType","handleCheckbox","event","checkbox","document","getElementById","target","checked","selectedPackages","push","delete","indexOf","handleTravelButton","selectedFacility","Number","success","window","location","reload","packageID","driverID","handleFacilityChange","value","info","isManager","bind","width","margin","textAlign","ControlButtonStyle","map","f","address","zip","h3Style","tableStyle","Component","marginRight","marginTop"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Button from 'react-bootstrap/Button'\nimport Form from 'react-bootstrap/Form'\nimport Col from 'react-bootstrap/Col'\nimport Card from 'react-bootstrap/Card'\nimport Table from 'react-bootstrap/Table'\nimport { List } from 'immutable'\nimport { apiPost } from '../../utils/api'\nimport Alert from 'react-bootstrap/Alert';\n\n\nclass EmpDriver extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: props.info.id,\n      truckID: props.info.truckID,\n      type: '',\n      isManager: props.info.isManager ? props.info.isManager : false,\n      selectedFacility: 'Choose a Facility',\n      facilities: List([]),\n      packages: List([]),\n      selectedPackages: List([]),\n      notification: { is: false, message: '', type: '', header: '' }\n    };\n\n    this.makeTR = this.makeTR.bind(this);\n    this.getPackages = this.getPackages.bind(this);\n    this.getFacilities = this.getFacilities.bind(this);\n    this.getTruckType = this.getTruckType.bind(this);\n    this.handleCheckbox = this.handleCheckbox.bind(this);\n    this.handleTravelButton = this.handleTravelButton.bind(this);\n    this.handleFacilityChange = this.handleFacilityChange.bind(this);\n    this.handleDeliverButton = this.handleDeliverButton.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPackages();\n    this.getFacilities();\n    this.getTruckType();\n  }\n\n  makeTR = (p, id) => {\n    return (\n      <React.Fragment key={id}>\n        <tr>\n          { this.state.type === 'Delivery' ? <td> <Button name='deliver' onClick={this.handleDeliverButton} id={p.id} variant='success' >Deliver</Button></td> : null}\n          <td> { p.id } </td>\n          <td> { p.senderEmail } </td>\n          <td> { p.recipientEmail } </td>\n          <td> { p.senderAddress } </td>\n          <td> { p.recipientAddress } </td>\n          <td> { p.deliveryStatus } </td>\n          <td> { p.packageWeight } </td>\n        </tr>\n      </React.Fragment>)\n  };\n\n  getFacilities = () => {\n    apiPost('/facility/all', { facilityID: this.state.facilityID })\n      .then((resp) => {\n        if (resp.facilities && resp.facilities.size !== 0) {\n          this.setState({ facilities: List(resp.facilities) })\n        } else {\n          this.setState({ notification: { is: true, message: 'Could not get facilities.', type: 'danger', header: 'Error!' } })\n        }\n      })\n      .catch(error => {\n        this.setState({ notification: { is: true, message: 'Could not get facilities.', type: 'danger', header: 'Error!' } })\n      })\n  };\n\n  getPackages = () => {\n    apiPost('/truck/packages', { truckID: this.state.truckID })\n      .then(resp => {\n        console.log(resp);\n        if (resp.packages && resp.packages.length !== 0) {\n          this.setState({ packages: List(resp.packages) })\n        } else {\n          this.setState({ notification: { is: true, message: 'There are currently no packages at the facility!', type: 'warning', header: 'No packages.' } })\n        }\n      })\n      .catch(error => {\n        this.setState({ notification: { is: true, message: 'Could not get facilities.', type: 'danger', header: 'Error!' } })\n      })\n  };\n\n  getTruckType = () => {\n    apiPost('/truck/type', { truckID: this.state.truckID })\n      .then(resp=> {\n        console.log(resp);\n        this.setState({ type: resp.type })\n        })\n        .catch(error => {\n          this.setState({ notification: { is: true, message: 'Could not get truck type!', type: 'danger', header: 'Error!' } })\n        })\n  };\n\n  handleCheckbox = (event) => {\n    const checkbox = document.getElementById(event.target.id);\n    if (checkbox.checked) {\n      this.setState({ selectedPackages: this.state.selectedPackages.push(event.target.id) }, () => { checkbox.checked = true });\n    } else {\n      this.setState({ selectedPackages: this.state.selectedPackages.delete(this.state.selectedPackages.indexOf(event.target.id)) }, () => { checkbox.checked = false; } );\n    }\n  };\n\n  handleTravelButton = (event) => {\n    console.log(this.state);\n    const state = this.state;\n    if (state.selectedFacility !== 'Choose a Facility') {\n      apiPost('/truck/travel', { packages: state.packages, truckID: state.truckID, facilityID: Number(state.selectedFacility[0]) })\n      .then(resp => {\n        console.log(resp);\n        if (resp.success && resp.success === true) {\n          window.location.reload();\n        } else {\n          this.setState({ notification: { is: true, message: 'Could not travel.', type: 'danger', header: 'Error!' } })\n        }\n      })\n      .catch(error => {\n        this.setState({ notification: { is: true, message: 'Could not travel.', type: 'danger', header: 'Error!' } })\n      })\n    }\n  };\n\n  handleDeliverButton = (event) => {\n    apiPost('/truck/deliver', { packageID: event.target.id, driverID: this.state.truckID })\n      .then(resp => {\n        console.log(resp);\n        if (resp.success && resp.success === true) {\n          window.location.reload()\n        } else {\n          this.setState({ notification: { is: true, message: 'Could not deliver.', type: 'danger', header: 'Error!' } })\n        }\n      })\n      .catch(error => {\n        this.setState({ notification: { is: true, message: 'Could not deliver.', type: 'danger', header: 'Error!' } })\n      })\n  };\n\n  handleFacilityChange = (event) => {\n    this.setState({ selectedFacility: event.target.value });\n  };\n\n  render() {\n    return (\n      <div>\n        { this.state.notification.is ? (<Alert variant={this.state.notification.type} dismissible> <Alert.Heading>{ this.state.notification.header }</Alert.Heading><p>{ this.state.notification.message }</p></Alert>): null }\n        <div>\n          <Card className=\"text-center\">\n            <Card.Header>Control Center</Card.Header>\n            <Card.Body>\n              <Card.Title>Driver Actions</Card.Title>\n              <Form.Row style ={{ width: 500, margin: '0 auto', textAlign: 'center'  }}>\n                { this.state.type === 'Delivery' ? <Button variant=\"info\" disabled style={ControlButtonStyle} onClick={this.handleTravelButton}>Travel to Facility</Button> : <Button variant=\"info\" style={ControlButtonStyle} onClick={this.handleTravelButton}>Travel to Facility</Button> }\n                <Form.Group as={Col}>\n                  <Form.Control as='select' value={this.state.selectedFacility} onChange={this.handleFacilityChange}>\n                    <option>Choose a Facility</option>\n                    { this.state.facilities.map((f) => {return (<option key={f.facilityID}>{f.facilityID + ' - ' + f.address + ', ' + f.state + ', ' + f.zip}</option>)}) }\n                  </Form.Control>\n              </Form.Group>\n              </Form.Row>\n            </Card.Body>\n          </Card>\n        </div>\n\n        <h3 style={h3Style}>Packages in Truck</h3>\n        <Table style={tableStyle} striped bordered hover>\n          <thead>\n            <tr>\n              { this.state.type === 'Delivery' ? <th>Deliver</th> : null }\n              <th>#</th>\n              <th>Sender Email</th>\n              <th>Sender Address</th>\n              <th>Recipient Email</th>\n              <th>Recipient Address</th>\n              <th>Delivery Status</th>\n              <th>Weight</th>\n            </tr>\n          </thead>\n          <tbody>\n          { this.state.packages.map((p) => { return this.makeTR(p, p.id) }) }\n          </tbody>\n    </Table>\n      </div>\n    )\n    }\n}\n\nconst ControlButtonStyle = {\n  marginRight: '16px',\n};\n\nconst tableStyle = {\n  margin: '0 auto',\n  textAlign: \"center\",\n};\n\nconst h3Style = {\n  marginTop: '2.5%',\n};\n\nexport default EmpDriver;"]},"metadata":{},"sourceType":"module"}